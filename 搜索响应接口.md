
## 接口请求示例

根据SearchIndexTask.vue代码分析，前端会向后端发送以下请求：

### 创建任务

```
POST /api/task/create
```

**请求体示例组合：**

1. **全部数据模式（从2011年1月1日至昨日的所有历史数据）**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": ["电商", "淘宝", "京东"],
    "cities": {
      "0": { "name": "全国", "code": "0" }
    },
    "resume": false
  },
  "priority": 5
}
```

2. **预设天数模式（最近N天）**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": ["电商", "淘宝", "京东"],
    "cities": {
      "0": { "name": "全国", "code": "0" }
    },
    "days": 30,  // 可选值: 7, 30, 90, 180
    "resume": false
  },
  "priority": 5
}
```

3. **自定义日期范围模式**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": ["电商", "淘宝", "京东"],
    "cities": {
      "0": { "name": "全国", "code": "0" }
    },
    "date_ranges": [["2023-01-01", "2023-12-31"]],
    "resume": false
  },
  "priority": 5
}
```

4. **年度数据模式**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": ["电商", "淘宝", "京东"],
    "cities": {
      "0": { "name": "全国", "code": "0" }
    },
    "year_range": ["2022", "2023"],
    "resume": false
  },
  "priority": 5
}
```

5. **恢复任务模式 + 自定义日期**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": ["电商", "淘宝", "京东"],
    "cities": {
      "0": { "name": "全国", "code": "0" }
    },
    "date_ranges": [["2023-01-01", "2023-12-31"]],
    "resume": true,
    "task_id": "task_12345678"
  },
  "priority": 5
}
```

6. **恢复任务模式 + 预设天数**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": ["电商", "淘宝", "京东"],
    "cities": {
      "0": { "name": "全国", "code": "0" }
    },
    "days": 90,
    "resume": true,
    "task_id": "task_12345678"
  },
  "priority": 5
}
```

7. **恢复任务模式 + 年度数据**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": ["电商", "淘宝", "京东"],
    "cities": {
      "0": { "name": "全国", "code": "0" }
    },
    "year_range": ["2022", "2023"],
    "resume": true,
    "task_id": "task_12345678"
  },
  "priority": 5
}
```

8. **复杂示例：多关键词 + 多城市 + 自定义日期 + 恢复任务**
```json
{
  "taskType": "search_index",
  "parameters": {
    "keywords": [
      "1", "2", "3", "4", "55", "电脑", "手机"
    ],
    "cities": {
      "0": { "name": "全国", "code": "0" },
      "2": { "name": "贵阳市", "code": "2" },
      "92": { "name": "贺州市", "code": "92" },
      "901": { "name": "山东", "code": "901" },
      "902": { "name": "贵州", "code": "902" },
      "903": { "name": "江西", "code": "903" },
      "904": { "name": "重庆", "code": "904" },
      "905": { "name": "内蒙古", "code": "905" },
      "906": { "name": "湖北", "code": "906" },
      "907": { "name": "辽宁", "code": "907" },
      "908": { "name": "湖南", "code": "908" },
      "909": { "name": "福建", "code": "909" },
      "910": { "name": "上海", "code": "910" },
      "911": { "name": "北京", "code": "911" },
      "912": { "name": "广西", "code": "912" },
      "913": { "name": "广东", "code": "913" },
      "914": { "name": "四川", "code": "914" },
      "915": { "name": "云南", "code": "915" },
      "916": { "name": "江苏", "code": "916" },
      "917": { "name": "浙江", "code": "917" },
      "918": { "name": "青海", "code": "918" },
      "919": { "name": "宁夏", "code": "919" },
      "920": { "name": "河北", "code": "920" },
      "921": { "name": "黑龙江", "code": "921" },
      "922": { "name": "吉林", "code": "922" },
      "923": { "name": "天津", "code": "923" },
      "924": { "name": "陕西", "code": "924" },
      "925": { "name": "甘肃", "code": "925" },
      "926": { "name": "新疆", "code": "926" },
      "927": { "name": "河南", "code": "927" },
      "928": { "name": "安徽", "code": "928" },
      "929": { "name": "山西", "code": "929" },
      "930": { "name": "海南", "code": "930" },
      "931": { "name": "台湾", "code": "931" },
      "932": { "name": "西藏", "code": "932" },
      "933": { "name": "香港", "code": "933" },
      "934": { "name": "澳门", "code": "934" }
    },
    "date_ranges": [["2022-07-06", "2022-08-09"]],
    "resume": true,
    "task_id": "task11233"
  },
  "priority": 6
}
```

**响应示例：**
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "taskId": "task_12345678"
  }
}
```

## 参数说明

1. `taskType`: 任务类型，固定为"search_index"
2. `parameters`: 任务参数对象
   - `keywords`: 关键词列表，每个关键词为字符串
   - `cities`: 城市对象，键为城市代码，值包含名称和代码
     - 城市代码"0"表示全国
     - 900以上的代码通常表示省份
     - 其他数字代码表示具体城市
   - 时间参数(四选一):
     - 无时间参数：默认获取从2011年1月1日至昨日的所有数据
     - `days`: 获取最近几天的数据，可选值有7、30、90、180
     - `date_ranges`: 自定义日期范围，格式为[["YYYY-MM-DD", "YYYY-MM-DD"]]
     - `year_range`: 年份范围，格式为["YYYY", "YYYY"]
   - `resume`: 是否恢复任务，布尔值
   - `task_id`: 当恢复任务时，需要提供的任务ID
3. `priority`: 任务优先级，范围1-10，数字越大优先级越高

## 注意事项

1. 日期范围限制：可选择的最早日期为2011-01-01，最晚日期为昨天
2. 年份范围限制：可选择的最早年份为2011年，最晚年份为当前年份
3. 当选择恢复任务时，必须提供有效的task_id
4. 必须至少有一个关键词和一个城市才能提交任务
